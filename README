SikhiToTheMax Desktop App
=========================

##Prerequisites
 1. Node
 2. npm
 3. Have the Developer ID certificate for Khalis Foundation installed from Apple Developer Console

##Installation
 * Clone repository
 * Run `git submodule update --init --recursive` after you `cd` into the repository
 * Run `git checkout -t origin/dev` in the repository root and the www folder
 * Run `npm i` in the repository root and www folder

##Configuration
###Uploading to Remote
Create file packaging/aws.json using packaging/aws-sample.json and fill out AWS information

###Updating macOS version for automatic updates
Create file packaging/keys.json using packaging/keys-sample.json

##Running
 * Run `npm start` in the repository root

##Packaging

###macOS
 * Run `npm run dist:osx` to create and upload the app

###Windows
 * On a Mac, run `npm run pack:win` to create the app (temporary limitation due to SQLite plugin)
 * Copy `sttme-win32-{version}.zip` to Windows machine `builds` folder within project folder
 * Switch to Windows machine
 * Ensure that `builds/SikhiToTheMax64` is a clone of khalis.net server dir `/home/releases/sttme-win32` (excluding version directories and index.php)
 * Run `npm run dist:win` to generate `RELEASES`, diff, and setup files
 * Upload new nupkg files in `builds/SikhiToTheMax64` to `/home/releases/sttme-win32`
 * Upload `RELEASES` file in `builds/SikhiToTheMax64` to `/home/releases/sttme-win32`
 * Upload `SikhiToTheMaxSetup.exe` in `builds/SikhiToTheMax64` to `/home/releases/_version_`
 * Move the `_version_` folder to `/home/releases/sttme-win32`

